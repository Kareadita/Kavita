<h5>Scrobble History</h5>
<p>Here you will find any scrobble events linked with your account. In order for events to exist, you must have an active
  scrobble provider configured. All events that have been processed will clear after a month. If there are non-processed events, it
  is likely these cannot form matches upstream. Please reach out to your admin to get them corrected.</p>
<div class="row g-0 mb-2">
  <div class="col-md-10">
    <form [formGroup]="formGroup">
      <div class="form-group pe-1">
        <label for="filter">Filter</label>
        <input id="filter" type="text" class="form-control" formControlName="filter" autocomplete="off"/>
      </div>
    </form>
  </div>
  <div class="col-md-2 mt-4">
    <ngb-pagination *ngIf="pagination"
                    [(page)]="pagination.currentPage"
                    [pageSize]="pagination.itemsPerPage"
                    [collectionSize]="pagination.totalItems"
                    (pageChange)="onPageChange($event)"
    ></ngb-pagination>
  </div>
</div>
  <table class="table table-light table-striped table-hover table-sm scrollable">
    <thead>
    <tr>
      <th scope="col" sortable="created" (sort)="updateSort($event)">
        Created
      </th>
      <th scope="col" sortable="lastModified" (sort)="updateSort($event)" direction="desc">
        Last Modified
      </th>
      <th scope="col">
        Type
      </th>
      <th scope="col" sortable="seriesName" (sort)="updateSort($event)">
        Series
      </th>
      <th scope="col">
        Data
      </th>
      <th scope="col">
        Is Processed
      </th>
    </tr>
    </thead>
    <tbody>
    <tr *ngIf="events.length === 0">
      <td colspan="6">No Data</td>
    </tr>
    <tr *ngFor="let item of events; let idx = index;">
      <td>
        {{item.created | date:'MM/dd/yy h:mm a' }}
      </td>
      <td>
        {{item.lastModified | date:'MM/dd/yy h:mm a' }}
      </td>
      <td>
        {{item.scrobbleEventType | scrobbleEventType}}
      </td>
      <td id="scrobble-history--{{idx}}">
        <a href="/library/{{item.libraryId}}/series/{{item.seriesId}}" target="_blank">{{item.seriesName}}</a>
      </td>
      <td>
        <ng-container [ngSwitch]="item.scrobbleEventType">
          <ng-container *ngSwitchCase="ScrobbleEventType.ChapterRead">
            Volume {{item.volumeNumber}} Chapter {{item.chapterNumber}}
          </ng-container>
          <ng-container *ngSwitchCase="ScrobbleEventType.ScoreUpdated">
            Rating {{item.rating}}
          </ng-container>
          <ng-container *ngSwitchDefault>
            Not Applicable
          </ng-container>
        </ng-container>
      </td>
      <td>
        <i class="fa-regular fa-circle icon" aria-hidden="true" *ngIf="!item.isProcessed"></i>
        <i class="fa-solid fa-check-circle icon" aria-hidden="true" *ngIf="item.isProcessed"></i>
        <span class="visually-hidden" attr.aria-labelledby="scrobble-history--{{idx}}">{{item.isProcessed ? 'Processed' : 'Not Processed'}}</span>
      </td>
    </tr>
    </tbody>
  </table>

