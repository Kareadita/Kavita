<ng-container>
    <ngx-extended-pdf-viewer
        #pdfViewer
        [src]="readerService.downloadPdf(this.chapterId)"
        height="100vh"
        [(page)]="currentPage"
        [textLayer]="true" 
        [useBrowserLocale]="false"
        [showHandToolButton]="true"
        [showOpenFileButton]="false"
        [showPrintButton]="false"
        [showBookmarkButton]="false"
        [showRotateButton]="false"
        [showDownloadButton]="false"
        [showPropertiesButton]="false"
        [(zoom)]="zoomSetting"
        [showSecondaryToolbarButton]="true"
        [theme]="theme"
        [formTheme]="theme"
        [backgroundColor]="backgroundColor"
        [customToolbar]="multiToolbar"
        

        (pageChange)="onPageChange($event)"
    > 
    
    </ngx-extended-pdf-viewer>
    <!--  -->
    <!-- [pageViewMode]="bookMode"-->
    <ng-template #multiToolbar>
        <!-- THis is their code Robbie. We want to emulate theirs withours below. -->
        <!-- <pdf-toolbar [showRotateButton]="false" [showOpenFileButton]="false"  [showPrintButton]="false" [showSecondaryToolbarButton]="true">

        </pdf-toolbar> -->

        <div class="" style="min-height: 36px" id="toolbarViewer"> <!--action-bar row g-0 justify-content-between-->
            <div class="" id="toolbarViewerLeft">
                <pdf-toggle-sidebar></pdf-toggle-sidebar>
                    <pdf-find-button></pdf-find-button>
                    <pdf-paging-area></pdf-paging-area>
                <!-- <div class="row g-0 justify-content-between">
                    
                    <div class="col-2 col-xs-1">
                        
                    </div>
                    <div class="col-2 col-xs-1">
                        
                    </div>
                    <div class="col-2 col-xs-1">
                        
                    </div> 
                </div>-->
                
            </div>
            
        

            <div class="book-title mx-auto d-none d-sm-block">
                <ng-container *ngIf="isLoading; else showTitle">
                    <div class="spinner-border spinner-border-sm text-primary" style="border-radius: 50%;" role="status">
                        <span class="visually-hidden">Loading book...</span>
                    </div>
                </ng-container>
                <ng-template #showTitle>
                    <span *ngIf="incognitoMode" (click)="turnOffIncognito()" role="button" aria-label="Incognito mode is on. Toggle to turn off.">(<i class="fa fa-glasses"  aria-hidden="true"></i><span class="visually-hidden">Incognito Mode</span>)</span>
                    <span class="book-title-text ms-1" [ngbTooltip]="bookTitle">{{bookTitle}}</span>
                </ng-template>
            </div>

            <div  id="toolbarViewerRight"> <!--class="right-side col-6"-->
                <pdf-hand-tool></pdf-hand-tool>
    
                <pdf-select-tool></pdf-select-tool>
    
                <pdf-presentation-mode></pdf-presentation-mode>

                <button (click)="toggleTheme()" class="btn btn-icon">
                    <i class="fa-solid {{this.theme === 'light' ? 'fa-sun' : 'fa-moon'}}" aria-hidden="true"></i>
                    <span class="visually-hidden">{{this.theme === 'light' ? 'Light Theme' : 'Dark Theme'}}</span>
                </button>

    
                <button class="btn btn-icon col-2 col-xs-1" (click)="closeReader()">
                    <i class="fa fa-times-circle" aria-hidden="true"></i>
                    <span class="visually-hidden">Close Reader</span>
                </button>
    
                <div class="verticalToolbarSeparator hiddenSmallView"></div>
                <div class="col-2 col-xs-1">
                    
                </div>
                <pdf-toggle-secondary-toolbar></pdf-toggle-secondary-toolbar>
            </div>

            <pdf-zoom-toolbar ></pdf-zoom-toolbar>

        </div>

      </ng-template>
</ng-container>
